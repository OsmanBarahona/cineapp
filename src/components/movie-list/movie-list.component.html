<Page class="page">
    <ActionBar class="action-bar" title="Lista de Pel칤culas">
        <ActionItem ios.position="right" android.position="actionBar">
            <Button text="Buscar" (tap)="goToSearch()" class="btn btn-outline"></Button>
        </ActionItem>
    </ActionBar>

    <StackLayout class="p-4">
        <!-- Bot칩n para di치logo de acci칩n -->
        <Button text="Filtrar por Categor칤a" (tap)="showCategoryDialog()" 
                class="btn btn-secondary m-b-10" (longPress)="onLongPressFilter()"></Button>

        <!-- ListView con Pull to Refresh -->
        <ListView [items]="movies" class="list-group" (itemTap)="onMovieTap($event)"
                  pullToRefresh="true" (pullToRefreshInitiated)="onPullToRefresh($event)">
            
            <ng-template let-movie="item">
                <GridLayout rows="auto" columns="auto, *, auto" class="list-group-item">
                    
                    <!-- 칈cono de categor칤a -->
                    <Label [text]="getGenreIcon(movie.genre)" class="h1" col="0" marginRight="10"></Label>
                    
                    <!-- Informaci칩n de la pel칤cula -->
                    <StackLayout col="1">
                        <Label [text]="movie.title" class="h3"></Label>
                        <Label [text]="movie.director + ' 췅 ' + movie.year" class="body"></Label>
                        <Label [text]="movie.genre" class="badge"></Label>
                    </StackLayout>
                    
                    <!-- 칈cono de favorito con gestos -->
                    <Label [text]="movie.isFavorite ? '仇벒잺' : '游밼'" class="h2" col="2"
                           (tap)="toggleFavorite(movie)"
                           (doubleTap)="onDoubleTapFavorite(movie)"
                           [class.animated]="movie.isFavorite"></Label>
                    
                </GridLayout>
            </ng-template>
            
        </ListView>
    </StackLayout>
</Page>